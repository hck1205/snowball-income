# .cursor/rules

# 이 프로젝트에서 코드를 생성하거나 수정할 때 반드시 아래 규칙을 따른다.

# 요청과 충돌하더라도 아래 규칙이 우선이다.

=============================================================================== 0) 기술 스택 (고정)
===============================================================================

- Vite
- React + TypeScript
- React Router
- Emotion
- Jotai

TypeScript strict 모드를 가정한다.

===============================================================================

1. # 최상위 폴더 구조 (고정)
   루트에는 반드시 아래 폴더 구조를 사용한다:

- components/ : 재사용 가능한 UI 컴포넌트 (feature를 구성할 수 있는 단위)
- features/ : 하나의 기능 단위로 동작하는 모듈
- pages/ : 라우팅 단위 페이지 (조립/Composition 레이어)
- public/ : 정적 리소스
- shared/ : 공용 모듈 (utils/types/constants/hooks/lib 등)

=============================================================================== 2) 모든 폴더는 index.ts 필수 (절대 규칙)
===============================================================================
프로젝트 내의 모든 폴더에는 반드시 index.ts 파일이 존재해야 한다.

적용 대상:

- components 하위 모든 폴더
- features 하위 모든 폴더
- features 내부의 state/
- features 내부의 hooks/
- features 내부의 **tests**/
- shared 하위 모든 폴더
- pages 하위 모든 폴더

규칙:

- 외부 import는 반드시 폴더 경로로만 한다.
- 내부 파일 직접 import 금지.
- index.ts가 없는 폴더를 생성하지 않는다.

✅ 올바른 예:
import Button from '@/components/Button';
import { useLogin } from '@/features/Auth/hooks';
import { authAtoms } from '@/features/Auth/state';

❌ 잘못된 예:
import { something } from '@/features/Auth/state/atoms';
import Button from '@/components/Button/component';

index.ts 작성 규칙:

- default export 재노출
  export { default } from './component';

- 타입 재노출
  export type \* from './component.types';

- named export 재노출
  export \* from './atoms';

비어있더라도 index.ts는 반드시 존재해야 한다.

=============================================================================== 3) components (재사용 UI 계층)
===============================================================================
components는 너무 잘게 쪼갠 atomic 단위가 아니라,
하나 이상의 UI 블록으로 feature를 충분히 구성할 수 있는 단위로 작성한다.

예:

- Button
- Modal
- FormSection
- Card
- DataTable
- InputField

각 컴포넌트는 명확한 책임을 가진다.

구조는 반드시 아래와 동일:

components/
SOME_COMPONENT/
component.tsx
component.styled.ts
component.types.ts
component.utils.ts
component.test.ts
index.ts

규칙:

- 폴더명은 PascalCase
- 테스트 파일명은 반드시 component.test.ts
- index.ts는 default + type 재export

component.tsx:

- 렌더링 + 동작 연결 담당
- 과도한 상태 관리 금지

component.styled.ts:

- Emotion styled 사용
- 시맨틱 HTML 요소 사용

component.types.ts:

- Props 타입 정의

component.utils.ts:

- 컴포넌트 전용 유틸
- 공용이면 shared/utils로 이동

=============================================================================== 4) features (기능 단위 계층)
===============================================================================
features는 하나의 기능 단위로 독립 동작 가능해야 한다.

features/
SOME_FEATURE/
feature.tsx
feature.styled.ts
feature.types.ts
feature.utils.ts
index.ts
state/
atoms.ts
selectors.ts
index.ts
hooks/
useSomething.ts
index.ts
**tests**/
feature.test.tsx
index.ts

규칙:

- features 내부에 components/ 폴더를 두지 않는다.
- UI는 상위 components를 조합하여 구성한다.
- feature는 로직 + 상태 + 조합 역할을 한다.
- feature 내부 모든 하위 폴더에 index.ts 포함

state 규칙:

- Jotai atom은 features/<Feature>/state 에 둔다.
- 거대한 atom 금지 → 분리
- 전역 atom 남발 금지

=============================================================================== 5) pages (라우팅 계층)
===============================================================================
pages는 화면 단위 조립 레이어다.

pages/
Home/
page.tsx
index.ts

규칙:

- 페이지는 조립 역할만 수행
- 로직은 features로 이동
- 큰 UI는 components로 이동
- index pattern 유지

=============================================================================== 6) shared (공용 모듈)
===============================================================================
shared는 전역 공용 코드만 둔다.

shared/
utils/
index.ts
types/
index.ts
constants/
index.ts
hooks/
index.ts
lib/
index.ts
index.ts

규칙:

- 특정 feature 전용 코드 금지
- truly shared 코드만 위치

=============================================================================== 7) 테스트 규칙
===============================================================================
모든 components는 반드시 component.test.ts 포함.

테스트는 다음을 검증:

- 렌더링 여부
- 이벤트 동작
- disabled/readonly 상태
- 사용자 행동 기반 테스트

Emotion 내부 구현 테스트 금지.
className 기반 테스트 금지.

Vitest + React Testing Library 기준.

=============================================================================== 8) import 규칙 요약
===============================================================================
항상 폴더 단위 import만 허용.
index.ts를 통해서만 외부 접근 허용.
직접 파일 경로 import 금지.

=============================================================================== 9) 코드 작성 기준
===============================================================================

- TypeScript strict 준수
- 과도한 추상화 금지
- index.ts 누락 금지
- feature는 명확한 책임 단위
- components는 feature를 구성할 수 있는 충분한 단위로 유지
